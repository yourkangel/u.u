<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>you wont abandon me, right?</title>
  <style>
    :root {
      --bg: #ffffff;
      --ink: rgba(0, 0, 0, 0.92);
      --muted: rgba(0, 0, 0, 0.65);
      --card-w: min(560px, calc(100vw - 48px));
      --radius: 18px;
    }

    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);
      overflow: hidden;
    }

    /* FONDO: "lluvia" de palabras */
    .rain {
      position: fixed;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }

    .rain__word {
      position: absolute;
      top: -12vh;
      font-size: 22px;
      letter-spacing: 1px;
      color: #000; /* negro */
      opacity: 0.55; /* visible desde el inicio */
      font-family: "Segoe UI", "Meiryo", "Yu Gothic", system-ui, -apple-system, Arial, sans-serif;

      /* vertical */
      writing-mode: vertical-rl;
      text-orientation: upright;
      white-space: pre; /* respeta espacios */

      /* glow negro suave */
      text-shadow:
        0 0 6px rgba(0, 0, 0, 0.22),
        0 0 14px rgba(0, 0, 0, 0.12);

      will-change: transform, opacity, filter;
      animation-name: rainFall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }

    @keyframes rainFall {
      0% {
        transform: translateY(0);
        opacity: 0.55;
        filter: blur(0px);
      }
      70% {
        opacity: 0.25;
        filter: blur(1.5px);
      }
      100% {
        transform: translateY(120vh);
        opacity: 0;
        filter: blur(2.5px);
      }
    }

    /* MAIN */
    .main {
      height: 100%;
      display: grid;
      place-items: center;
      transition: filter 280ms ease, transform 280ms ease;
      position: relative;
      z-index: 1; /* por encima de la lluvia */
    }

    body.is-locked .main {
      filter: blur(14px);
      transform: scale(1.02);
      pointer-events: none;
      user-select: none;
    }

    .panel {
      width: var(--card-w);
      display: grid;
      justify-items: center;
      gap: 16px;
    }

    .card {
      width: 100%;
      border-radius: var(--radius);
      padding: 44px 28px;
      position: relative;

      /* glass (más transparente + más blur) */
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(0, 0, 0, 0.12);
      box-shadow:
        0 12px 36px rgba(0, 0, 0, 0.10),
        0 2px 10px rgba(0, 0, 0, 0.06);
      backdrop-filter: blur(34px);
      -webkit-backdrop-filter: blur(34px);
      overflow: hidden;
    }

    /* sin blur en los costados */
    .card::before,
    .card::after {
      content: none;
    }

    /* TÍTULO (mismo estilo que "log in") */
    .glitch {
      position: relative;
      text-align: center;
      font-size: 14px;
      letter-spacing: 0.8px;
      text-transform: lowercase;
      color: var(--muted);
      font-weight: 400;
      line-height: 1.2;
      user-select: none;
    }

    /* desactivo el efecto "glitch" para que coincida con el login */
    .glitch::before,
    .glitch::after {
      content: none;
      animation: none;
    }

    /* PLAYER (misma "cajita" que arriba) */
    .player {
      width: 100%;
      border-radius: var(--radius);
      padding: 14px 16px;

      /* glass: deja ver la lluvia por debajo */
      background: rgba(255, 255, 255, 0.18);
      border: 1px solid rgba(0, 0, 0, 0.14);
      box-shadow:
        0 12px 36px rgba(0, 0, 0, 0.10),
        0 2px 10px rgba(0, 0, 0, 0.06);
      backdrop-filter: blur(22px);
      -webkit-backdrop-filter: blur(22px);

      display: grid;
      grid-template-columns: 38px 1fr;
      align-items: center;
      gap: 12px;
    }

    .player__btn {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: 0;
      background: transparent;
      color: var(--ink);
      cursor: pointer;
      display: grid;
      place-items: center;
      padding: 0;
    }

    .player__btn:focus-visible {
      outline: 2px solid rgba(0, 0, 0, 0.35);
      outline-offset: 2px;
    }

    .player__icon {
      font-size: 18px;
      transform: translateX(1px);
      line-height: 1;
    }

    .player__range {
      width: 100%;
      -webkit-appearance: none;
      appearance: none;
      height: 4px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.16);
      outline: none;
      display: block;
      margin: 0;
      align-self: center; /* asegura centrado vertical */
    }

    .player__range::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.78);
      border: 0;
      cursor: pointer;
    }

    .player__range::-moz-range-thumb {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.78);
      border: 0;
      cursor: pointer;
    }

    /* LOGIN OVERLAY */
    .overlay {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      transition: opacity 220ms ease;
      opacity: 1;
      z-index: 10;
    }

    .overlay.is-hidden {
      opacity: 0;
      pointer-events: none;
    }

    .login {
      width: min(420px, calc(100vw - 48px));
      border-radius: 16px;
      padding: 18px;
      background: rgba(255, 255, 255, 0.45);
      border: 1px solid rgba(0, 0, 0, 0.14);
      box-shadow:
        0 14px 40px rgba(0, 0, 0, 0.12),
        0 3px 14px rgba(0, 0, 0, 0.07);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);

      /* para que todo quede bien centrado dentro del cuadro */
      display: grid;
      justify-items: center;
      gap: 10px;
    }

    .login__title {
      font-size: 14px;
      letter-spacing: 0.8px;
      text-transform: lowercase;
      color: var(--muted);
      margin: 0;
      text-align: center;
      width: 100%;
    }

    .login__input {
      width: 100%;
      height: 44px;
      border-radius: 12px;
      border: 1px solid rgba(0, 0, 0, 0.16);
      background: rgba(255, 255, 255, 0.52);
      padding: 0 12px;
      font-size: 16px;
      outline: none;
      box-sizing: border-box;
      display: block;
      margin: 0 auto;
    }

    .login__input:focus {
      border-color: rgba(0, 0, 0, 0.35);
      box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.08);
    }
  </style>
</head>
<body class="is-locked">
  <div class="rain" aria-hidden="true">
    <!-- pocos elementos: mezcla de caracteres + palabras completas con números -->
    <span class="rain__word" style="left: 12%; animation-duration: 7.1s; animation-delay: -1.2s;">夢</span>
    <span class="rain__word" style="left: 38%; animation-duration: 8.6s; animation-delay: -3.9s;">さよなら 002</span>
    <span class="rain__word" style="left: 66%; animation-duration: 7.8s; animation-delay: -5.1s;">心</span>
    <span class="rain__word" style="left: 86%; animation-duration: 9.2s; animation-delay: -2.4s;">夜 000</span>
    <span class="rain__word" style="left: 54%; animation-duration: 6.9s; animation-delay: -4.4s;">あなた 004</span>
  </div>
  <main class="main">
    <section class="panel">
      <div class="card">
        <div class="glitch" data-text="you wont abandon me, right?">you wont abandon me, right?</div>
      </div>

      <div class="player" role="group" aria-label="Music player">
        <button class="player__btn" id="playBtn" type="button" aria-label="Play/Pause">
          <span class="player__icon" id="playIcon" aria-hidden="true">►</span>
        </button>
        <input class="player__range" id="seek" type="range" min="0" max="100" value="0" step="0.1" aria-label="Seek" />
      </div>
    </section>
  </main>

  <div class="overlay" id="loginOverlay" role="dialog" aria-modal="true">
    <div class="login">
      <div class="login__title">log in</div>
      <input class="login__input" id="loginInput" type="text" autocomplete="off" spellcheck="false" />
    </div>
  </div>

  <audio id="audio" preload="metadata" src="ambientpill 1.mp3"></audio>

  <script>
    const body = document.body;
    const overlay = document.getElementById('loginOverlay');
    const loginInput = document.getElementById('loginInput');

    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('playBtn');
    const playIcon = document.getElementById('playIcon');
    const seek = document.getElementById('seek');

    function unlock() {
      body.classList.remove('is-locked');
      overlay.classList.add('is-hidden');
      // opcional: focus al play para que puedas usar teclado
      playBtn.focus({ preventScroll: true });
    }

    // Login: solo entra cuando apretás Enter
    loginInput.addEventListener('keydown', (e) => {
      if (e.key !== 'Enter') return;
      if (loginInput.value.trim().length > 0) unlock();
    });

    // Focus directo a la caja al cargar
    window.addEventListener('load', () => {
      loginInput.focus({ preventScroll: true });
    });

    function setPlayingUI(isPlaying) {
      playIcon.textContent = isPlaying ? '❚❚' : '►';
      playIcon.style.transform = isPlaying ? 'translateX(0)' : 'translateX(1px)';
    }

    playBtn.addEventListener('click', async () => {
      try {
        if (audio.paused) {
          await audio.play();
          setPlayingUI(true);
        } else {
          audio.pause();
          setPlayingUI(false);
        }
      } catch (e) {
        // Si no hay archivo o el navegador bloquea autoplay, simplemente no rompe.
        setPlayingUI(false);
      }
    });

    audio.addEventListener('loadedmetadata', () => {
      if (Number.isFinite(audio.duration)) {
        seek.max = String(audio.duration);
      }
    });

    audio.addEventListener('timeupdate', () => {
      seek.value = String(audio.currentTime || 0);
    });

    seek.addEventListener('input', () => {
      const t = Number(seek.value);
      if (Number.isFinite(t)) audio.currentTime = t;
    });

    audio.addEventListener('ended', () => {
      setPlayingUI(false);
    });
  </script>
</body>
</html>
